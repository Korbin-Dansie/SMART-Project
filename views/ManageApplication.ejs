<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="/font/bootstrap-icons.css" />
  <%- include('partials/favico') %>
  <title>Manage Applications</title>
</head>

<script>
  function addGuardian() {}

  function removeGuardian() {}
</script>

<body>
  <div class="container-fluid vh-100" style="margin-top:10px">
    <div class="" style="margin-top:100px">
      <div class="rounded d-flex justify-content-center">
        <div class="col-md-6 col-sm-12 shadow-lg p-5 bg-light">
          <div class="text-center">
            <h3 class="text-primary">Manage Application</h3>
          </div>
          <form method="post" action="" onSubmit="">

            <div class="row pt-4">
              <div class="col-md-6">
                <!--First Name-->
                <div>
                  <label>First Name:</label>
                  <div class="input-group mb-3">
                    <span class="input-group-text bg-primary"><i class="bi bi-person-circle text-white"></i></span>
                    <input id="applicantFirstName" type="text" class="form-control" placeholder="Jane" value=<%=locals.applicationData['first_name'] %> readonly>
                  </div>
                </div>

                <!--Last Name-->
                <div>
                  <label>Last Name:</label>
                  <div class="input-group mb-3">
                    <span class="input-group-text bg-primary"><i class="bi bi-person-circle text-white"></i></span>
                    <input id="applicantLastName" type="text" class="form-control" placeholder="Doe" value=<%=locals.applicationData['last_name'] %> readonly>
                  </div>
                </div>

                <!--Date of Birth-->
                <div>
                  <label>Date of Birth:</label>
                  <div class="input-group mb-3">
                    <span class="input-group-text bg-primary"><i class="bi bi-calendar-date text-white"></i></span>
                    <input id="applicantDoB" type="text" class="form-control" placeholder="MM/DD/YYYY" value=<%=locals.applicationData['date_of_birth'].toLocaleDateString('en-US') %> readonly>
                  </div>
                </div>

                <!--Latitude-->
                <div>
                  <label>Address:</label>
                  <div class="input-group mb-3">
                    <span class="input-group-text bg-primary"><i class="bi bi-house-door text-white"></i></span>
                    <input id="applicantAddress" type="text" class="form-control" placeholder="41.24122 N" value=<%=locals.applicationData['latitude'] %> readonly>
                  </div>
                </div>

                <!--Longitude-->
                <div>
                  <label>Address:</label>
                  <div class="input-group mb-3">
                    <span class="input-group-text bg-primary"><i class="bi bi-house-door text-white"></i></span>
                    <input id="applicantAddress" type="text" class="form-control" placeholder="2.10265 E" value=<%=locals.applicationData['longitude'] %> readonly>
                  </div>
                </div>

                <!--Public School Level-->
                <div>
                  <label>Public School Level:</label>
                  <div class="input-group mb-3">
                    <span class="input-group-text bg-primary"><i class="bi bi-mortarboard text-white"></i></span>
                    <input id="applicantSchoolLevel" type="text" class="form-control" placeholder="10" value=<%=locals.applicationData['level'] %> readonly>
                  </div>
                </div>

                <!--Public School GPA-->
                <!--
                <div>
                  <label>Public School GPA:</label>
                  <div class="input-group mb-3">
                    <span class="input-group-text bg-primary"><i class="bi bi-mortarboard text-white"></i></span>
                    <input id="applicantGPA" type="text" class="form-control" placeholder="15" value=<%=locals.applicationData['public_school_gpa'] %> readonly>
                  </div>
                </div>
                -->
              </div>

              <div class="col-md-6">
                <!--Contact Information-->
                <% if (locals.contactInfo.length > 0) { %>
                  <% for (let i = 0; i < locals.contactInfo.length; i++) { %>
                    <div>
                      <!--Type of Contact Information can also be accessed from here and clarified on screen if desired-->
                      <label>Contact Information:</label>
                      <div class="input-group mb-3">
                        <span class="input-group-text bg-primary"><i class="bi bi-telephone text-white"></i></span>
                        <input id="applicantContact" type="text" class="form-control" readonly value=<%= locals.contactInfo[i].value %>>
                      </div>
                    </div>
                  <% } %>
                <% } %>
                
                <!--Transportation Assistance Radio Buttons-->
                <div class="p-2">
                  <label>Do you need Transportation Assistance?</label>
                  <div class="input-group mb-1">
                    <% if (locals.applicationData['transportation_assistance'] == false) { %>
                    <div class="form-check mx-1">
                      <input class="form-check-input" type="radio" id="noTransportAssist" checked disabled>
                      <label class="form-check-label">
                        No
                      </label>
                    </div>
                    <div class="form-check mx-1">
                      <input class="form-check-input" type="radio" id="yesTransportAssist" disabled>
                      <label class="form-check-label">
                        Yes
                      </label>
                    </div>
                    <% } else { %>
                    <div class="form-check mx-1">
                      <input class="form-check-input" type="radio" id="noTransportAssist" disabled>
                      <label class="form-check-label">
                        No
                      </label>
                    </div>
                    <div class="form-check mx-1">
                      <input class="form-check-input" type="radio" id="yesTransportAssist" checked disabled>
                      <label class="form-check-label">
                        Yes
                      </label>
                    </div>
                    <% } %>
                  </div>
                </div>

                <!--Meal Assistance Radio Buttons-->
                <div class="p-2">
                  <label>Do you need Meal Assistance?</label>
                  <div class="input-group mb-1">
                    <% if (locals.applicationData['meal_assistance'] == false) { %>
                    <div class="form-check mx-1">
                      <input class="form-check-input" type="radio" id="noMealAssist" checked disabled>
                      <label class="form-check-label">
                        No
                      </label>
                    </div>
                    <div class="form-check mx-1">
                      <input class="form-check-input" type="radio" id="yesMealAssist" disabled>
                      <label class="form-check-label">
                        Yes
                      </label>
                    </div>
                    <% } else { %>
                    <div class="form-check mx-1">
                      <input class="form-check-input" type="radio" id="noMealAssist" disabled>
                      <label class="form-check-label">
                        No
                      </label>
                    </div>
                    <div class="form-check mx-1">
                      <input class="form-check-input" type="radio" id="yesMealAssist" checked disabled>
                      <label class="form-check-label">
                        Yes
                      </label>
                    </div>
                    <% } %>
                  </div>
                </div>

                <!-- Essay -->
                <div class="p-2">
                  <label for="applicantShortEssay" class="form-label">Why do you Want to Enroll in the
                    Program?</label>
                  <textarea class="form-control" id="applicantShortEssay" rows="7" readonly><%= locals.applicationData['essay'] %></textarea>
                </div>
              </div>

              <!--Guardian-->
              <form id="guardianForm" name="guardianForm" method="" action="" onSubmit="return false">
                <div>
                  <label>Parent / Guardians:</label>
                  <div class="input-group mb-3">
                    <table class="table table-striped table-hover table-sm" id="guardianTable">
                      <thead>
                        <tr>
                          <th scope="col">Name</th>
                          <th scope="col">Phone</th>
                          <th scope="col">Email</th>
                          <th scope="col">Income</th>
                        </tr>
                      </thead>
                      <tbody>
                        <% if (locals.guardians.length > 0) { %>
                        <% for (let i = 0; i < locals.guardians.length; i++) { %>
                        <tr>
                          <th scope="col"><%= locals.guardians[i].first_name %> <%= locals.guardians[i].last_name %></th>
                          <!--Phone-->
                          <% if (locals.guardianContacts[i].phone === undefined) { %>
                            <th scope="col">N/A</th>
                          <% } else { %>
                            <th scope="col"><%= locals.guardianContacts[i].phone.value %></th>
                          <% } %>
                          <!--Email-->
                          <% if (locals.guardianContacts[i].email === undefined) { %>
                            <th scope="col">N/A</th>
                          <% } else { %>
                            <th scope="col"><%= locals.guardianContacts[i].email.value %></th>
                          <% } %>
                          <th scope="col">MT <%= locals.guardians[i].annual_income %></th>
                        </tr>
                        <% } %>
                        <% } %>
                      </tbody>
                    </table>

                    <div class="col-md-6 p-3">
                      <label>Guardian Name</label>
                      <div class="input-group">
                          <span class="input-group-text bg-primary"><i
                                  class="bi bi-person-plus-fill text-white"></i></span>
                          <input id="guardianName" name="guardianName" type="text"
                              class="form-control" placeholder="Name" required pattern="[\w]{1,100}[ ][\w]{1,100}" 
                              title="Enter at least 2 names.">
                      </div>

                      <label>Annual Income</label>
                      <div class="input-group">
                          <span class="input-group-text bg-primary"><i
                                  class="bi bi-cash text-white"></i></span>
                          <input id="guardianIncome" name="applicantGuardianIncome" type="number"
                              class="form-control" placeholder="MT 20,000" required>
                      </div>
                    </div>

                    <div class="col-md-6 p-3">
                      <label>Phone number (Optional)</label>
                      <div class="input-group">
                          <span class="input-group-text bg-primary"><i
                                  class="bi bi-telephone text-white"></i></span>
                          <input id="guardianPhone" name="guardianPhone" type="tel"
                              class="form-control" placeholder="Phone number" pattern="[+]?[- {0-9}]{1,100}" 
                              title="An optional + at the beginning, then only numbers, spaces, and dashes.">
                      </div>

                      <label>Email Address (Optional)</label>
                      <div class="input-group">
                          <span class="input-group-text bg-primary"><i
                                  class="bi bi-envelope-at text-white"></i></span>
                          <input id="guardianEmail" name="guardianEmail" type="email"
                              class="form-control" placeholder="Email">
                      </div>
                    </div>

                    <div class="text-center">
                      <button class="btn btn-primary mt-1" type="button" onclick="addGuardian()">
                        Save
                      </button>
                      <button class="btn btn-primary mt-1" type="button" onclick="removeGuardian()">
                        Remove Last
                      </button>
                    </div>

                    <p id="guardianError" class="text-danger" style="height:25px"></p>
                  </div>
                </div>
              </form>

              <!--Application Submission Date-->
              <div class="col-md-6 mt-2">
                <label>Date of Submission:</label>
                <div class="input-group mb-3">
                  <span class="input-group-text bg-primary"><i class="bi bi-calendar-date text-white"></i></span>
                  <input id="applicantSubmitDate" type="text" class="form-control" placeholder="MM/DD/YYYY" value=<%=locals.applicationData['date_of_application'].toLocaleDateString('en-US') %> readonly>
                </div>
              </div>

              <div class="col-md-6 mt-2">
                <div>
                  <!-- Application Status -->
                  <label for="optionNoFilter">Application Status:</label>
                  <div class="input-group mb-3">
                    <span class="input-group-text bg-primary"><i class="bi bi-person-badge text-white"></i></span>
                    <select class="form-select" id="applicationStatus" name="applicationStatus" required>
                      <% if (locals.applicationData['application_status'] == "Wait Listed") { %>
                      <option id="optionNoFilter" value="noFilter">No Filter</option>
                      <option id="optionWaitListed" value="Wait Listed" selected>Wait Listed</option>
                      <option id="optionAccepted" value="Accepted">Accepted</option>
                      <option id="optionRejected" value="Rejected">Rejected</option>
                      <option id="optionActive" value="Active">Active</option>
                      <% } else if (locals.applicationData['application_status'] == "Accepted") { %>
                      <option id="optionNoFilter" value="noFilter">No Filter</option>
                      <option id="optionWaitListed" value="Wait Listed">Wait Listed</option>
                      <option id="optionAccepted" value="Accepted" selected>Accepted</option>
                      <option id="optionRejected" value="Rejected">Rejected</option>
                      <option id="optionActive" value="Active">Active</option>
                      <% } else if (locals.applicationData['application_status'] == "Rejected") { %>
                      <option id="optionNoFilter" value="noFilter">No Filter</option>
                      <option id="optionWaitListed" value="Wait Listed">Wait Listed</option>
                      <option id="optionAccepted" value="Accepted">Accepted</option>
                      <option id="optionRejected" value="Rejected" selected>Rejected</option>
                      <option id="optionActive" value="Active">Active</option>
                      <% } else { %>
                      <option id="optionNoFilter" value="noFilter">No Filter</option>
                      <option id="optionWaitListed" value="Wait Listed">Wait Listed</option>
                      <option id="optionAccepted" value="Accepted">Accepted</option>
                      <option id="optionRejected" value="Rejected">Rejected</option>
                      <option id="optionActive" value="Active" selected>Active</option>
                      <% } %>
                    </select>
                  </div>
                </div>
                <div class="text-center">
                  <button class="btn btn-primary mt-2" type="submit">
                    Submit Application Status
                  </button>
                </div>
              </div>
              <div class="text-center">
                <p id="message" class="text-danger" style="height:25px">
                  <%- locals.message %>
                </p>
              </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</body>

</html>